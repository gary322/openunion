<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Proofwork â€¢ Task Descriptor Builder</title>
    <link rel="stylesheet" href="/ui/ui.css" />
  </head>
  <body class="theme-admin" data-portal="admin">
    <header class="pw-topbar">
      <div class="pw-topbar-inner">
        <a class="pw-brand" href="/apps/" aria-label="Proofwork home">
          <span class="pw-brand-badge pw-mono">PW</span>
          Proofwork
        </a>
        <nav class="pw-topnav" aria-label="Primary">
          <a class="pw-navlink" href="/apps/">Catalog</a>
          <a class="pw-navlink" href="/buyer/">Platforms</a>
          <a class="pw-navlink" href="/worker/">Workers</a>
          <a class="pw-navlink" href="/admin/" aria-current="page">Admin</a>
          <a class="pw-navlink" href="/docs/" target="_blank" rel="noreferrer">Docs</a>
        </nav>
      </div>
    </header>

    <main class="pw-container">
      <section class="pw-hero">
        <h1>Task Descriptor Builder</h1>
        <p>Build a valid <span class="pw-mono">task_descriptor</span>, preview it, and publish a bounty.</p>
        <div class="pw-hero-actions">
          <div class="pw-badge">
            Schema: <a class="pw-mono" href="/contracts/task_descriptor.schema.json" target="_blank" rel="noreferrer">task_descriptor.schema.json</a>
          </div>
          <div class="pw-actions">
            <a class="pw-btn" href="/admin/apps.html">Apps dashboard</a>
            <a class="pw-btn primary" href="/apps/">Apps marketplace</a>
          </div>
        </div>
      </section>

      <div class="pw-console">
        <aside class="pw-sidebar" aria-label="Admin navigation">
          <nav class="pw-sidenav">
            <div class="pw-sidenav-title">Ops</div>
            <a href="/admin/">Overview</a>
            <a href="/admin/alerts.html">Alerts</a>
            <a href="/admin/apps.html">Apps dashboard</a>
            <div class="pw-sidenav-title">Finance</div>
            <a href="/admin/payouts.html">Payouts</a>
            <a href="/admin/disputes.html">Disputes</a>
            <div class="pw-sidenav-title">Governance</div>
            <a href="/admin/artifacts.html">Artifacts</a>
            <a href="/admin/blocked-domains.html">Blocked domains</a>
            <div class="pw-sidenav-title">Tools</div>
            <a href="/admin/descriptor-builder.html" aria-current="page">Descriptor builder</a>
            <a href="/admin/explorer.html">Explorer</a>
          </nav>
        </aside>

        <div class="pw-split">
          <section class="pw-card">
            <div class="pw-card-title">
              <h2>Build & publish</h2>
              <span class="pw-kicker">Validates before create</span>
            </div>

            <div class="pw-row">
              <div class="pw-field">
                <label>Buyer API Token</label>
                <input class="pw-input" id="token" type="password" placeholder="pw_bu_..." />
              </div>
              <div class="pw-field">
                <label>API Base URL</label>
                <input class="pw-input" id="base" type="text" value="http://localhost:3000" />
              </div>
            </div>

            <div class="pw-row">
              <div class="pw-field">
                <label>Title</label>
                <input class="pw-input" id="title" />
              </div>
              <div class="pw-field">
                <label>Payout (cents)</label>
                <input class="pw-input" id="payout" type="number" value="1500" />
              </div>
            </div>

            <div class="pw-field">
              <label>Description</label>
              <textarea class="pw-textarea" id="description">Describe the task</textarea>
            </div>

            <div class="pw-field">
              <label>Task type (registered app task_type)</label>
              <input class="pw-input" id="taskType" value="custom_task" />
              <div class="pw-muted pw-mt-6">Must match an app you own (or a built-in system app). Create/manage apps in the Platform console.</div>
            </div>

            <div class="pw-field">
              <label>Allowed origins (comma)</label>
              <input class="pw-input" id="origins" value="https://example.com" />
            </div>

            <div class="pw-row">
              <div class="pw-field">
                <label>Capability tags</label>
                <select class="pw-select" id="caps" multiple size="6">
                  <option>browser</option>
                  <option>http</option>
                  <option>ffmpeg</option>
                  <option>llm_summarize</option>
                  <option>screenshot</option>
                </select>
              </div>
              <div class="pw-stack">
                <div class="pw-field">
                  <label>Freshness SLA (sec, optional)</label>
                  <input class="pw-input" id="freshness" type="number" />
                </div>
                <div class="pw-field">
                  <label>Required proofs</label>
                  <input class="pw-input" id="proofs" type="number" value="1" />
                </div>
              </div>
            </div>

            <div class="pw-field">
              <label>Input spec (JSON)</label>
              <textarea class="pw-textarea" id="input_spec">{"example": true}</textarea>
            </div>
            <div class="pw-field">
              <label>Output spec (JSON)</label>
              <textarea class="pw-textarea" id="output_spec">{"artifact": true}</textarea>
            </div>
            <div class="pw-field">
              <label>Site profile (JSON, optional)</label>
              <textarea class="pw-textarea" id="site_profile"></textarea>
            </div>

            <div class="pw-actions">
              <button class="pw-btn primary" id="build">Validate & Create Bounty</button>
            </div>
            <div id="error" class="pw-status bad" role="status"></div>
          </section>

          <aside class="pw-stack">
            <div class="pw-card soft">
              <div class="pw-card-title">
                <h2>Preview</h2>
                <span class="pw-kicker">What will be stored</span>
              </div>
              <div class="pw-actions">
                <span class="pw-badge">schema_version v1</span>
                <span class="pw-badge pw-mono" id="bytes">size: 0 B</span>
              </div>
              <pre class="pw-codeblock" id="preview">{}</pre>
            </div>
          </aside>
        </div>
      </div>
    </main>

    <script type="module" src="/admin/descriptor-builder.js"></script>
    <script type="module" src="/ui/shell.js"></script>
  </body>
</html>
