<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Proofwork â€¢ Platform Console</title>
    <link rel="stylesheet" href="/ui/ui.css" />
  </head>
  <body class="theme-buyer" data-portal="buyer">
    <header class="pw-topbar">
      <div class="pw-topbar-inner">
        <a class="pw-brand" href="/apps/" aria-label="Proofwork home">
          <span class="pw-brand-badge pw-mono">PW</span>
          Proofwork
        </a>
        <nav class="pw-topnav" aria-label="Primary">
          <a class="pw-navlink" href="/apps/">Catalog</a>
          <a class="pw-navlink" href="/buyer/" aria-current="page">Platforms</a>
          <a class="pw-navlink" href="/worker/">Workers</a>
          <a class="pw-navlink" href="/admin/">Admin</a>
          <a class="pw-navlink" href="/docs/" target="_blank" rel="noreferrer">Docs</a>
        </nav>
      </div>
    </header>

    <main class="pw-container">
      <section class="pw-hero" id="home">
        <h1>Platform Console</h1>
        <p>
          Attach your product, publish bounties with <span class="pw-mono">task_descriptor</span>, and pay workers - while your platform earns a cut on
          every successful job. Proofwork always charges a fixed <strong>1%</strong> fee from the worker portion.
        </p>
        <div class="pw-hero-actions">
          <div class="pw-badge">
            New here? Start with <a href="#onboarding">Onboarding</a>, or open the <a href="/apps/">apps catalog</a>.
          </div>
          <div class="pw-actions">
            <a class="pw-btn" href="/apps/">Browse apps</a>
            <a class="pw-btn primary" href="#integrations">Connect my platform</a>
          </div>
        </div>
      </section>

      <div class="pw-console">
        <aside class="pw-sidebar">
          <nav class="pw-sidenav" aria-label="Platform navigation">
            <div class="pw-sidenav-title">Platform</div>
            <a href="#onboarding">Onboarding <span class="pw-sidenav-badge" id="navBadgeOnboarding">6</span></a>
            <a href="#integrations">Integrations <span class="pw-sidenav-badge" id="navBadgeIntegrations">-</span></a>
            <a href="#apps">Apps <span class="pw-sidenav-badge" id="navBadgeApps">-</span></a>
            <a href="#work">Work <span class="pw-sidenav-badge" id="navBadgeWork">-</span></a>
            <a href="#money">Money <span class="pw-sidenav-badge" id="navBadgeMoney">-</span></a>
            <a href="#disputes">Disputes <span class="pw-sidenav-badge" id="navBadgeDisputes">-</span></a>
            <div class="pw-sidenav-group">
              <div class="pw-sidenav-title">Settings</div>
              <a href="#settings">Fees &amp; caps</a>
              <a href="/buyer/explorer.html">Explorer</a>
            </div>
          </nav>
        </aside>

        <section class="pw-stack">
          <section class="pw-card" id="onboarding">
            <div class="pw-card-title">
              <h2>Onboarding</h2>
              <span class="pw-kicker">No docs required</span>
            </div>
            <p class="pw-muted">
              Workflow-first by default. Toggle <strong>Dev</strong> (top right) for raw JSON, IDs, and endpoint responses.
            </p>

            <div class="pw-stepper">
              <div class="pw-step" id="stepToken">
                <div class="pw-step-dot">1</div>
                <div>
                  <div class="pw-step-title">Get a platform token</div>
                  <div class="pw-step-desc">Register (new platform), or sign in (demo), then mint a buyer token.</div>
                </div>
                <a class="pw-btn" href="#integrations">Start</a>
              </div>
              <div class="pw-step" id="stepOrigin">
                <div class="pw-step-dot">2</div>
                <div>
                  <div class="pw-step-title">Verify your domain</div>
                  <div class="pw-step-desc">Required for publishing bounties. Choose DNS, HTTP file, or header proof.</div>
                </div>
                <a class="pw-btn" href="#integrations">Verify</a>
              </div>
              <div class="pw-step" id="stepFees">
                <div class="pw-step-dot">3</div>
                <div>
                  <div class="pw-step-title">Set your platform fee</div>
                  <div class="pw-step-desc">Pick your cut (bps) + wallet. Proofwork always takes 1% of the worker share.</div>
                </div>
                <a class="pw-btn" href="#settings">Set fee</a>
              </div>
              <div class="pw-step" id="stepApp">
                <div class="pw-step-dot">4</div>
                <div>
                  <div class="pw-step-title">Register an app type</div>
                  <div class="pw-step-desc">Apps show up instantly (no approval). Apps define the "friendly form".</div>
                </div>
                <a class="pw-btn" href="#apps">Create app</a>
              </div>
              <div class="pw-step" id="stepPublish">
                <div class="pw-step-dot">5</div>
                <div>
                  <div class="pw-step-title">Publish your first bounty</div>
                  <div class="pw-step-desc">Use an app page to publish in seconds, or use the advanced bounty form below.</div>
                </div>
                <a class="pw-btn" href="/apps/">Publish</a>
              </div>
              <div class="pw-step" id="stepPaid">
                <div class="pw-step-dot">6</div>
                <div>
                  <div class="pw-step-title">Get paid</div>
                  <div class="pw-step-desc">Watch payouts, disputes, and earnings. Default disputes posture: 1-day hold.</div>
                </div>
                <a class="pw-btn" href="#money">View</a>
              </div>
            </div>
          </section>

          <section id="integrations" class="pw-stack">
            <div class="pw-card">
              <div class="pw-card-title">
                <h2>Access</h2>
                <span class="pw-kicker">Sign in or paste token</span>
              </div>

              <div class="pw-row">
                <div class="pw-field">
                  <label>Email</label>
                  <input class="pw-input" id="email" value="buyer@example.com" />
                </div>
                <div class="pw-field">
                  <label>Password</label>
                  <input class="pw-input" id="password" type="password" value="password" />
                </div>
              </div>

              <div class="pw-actions">
                <button class="pw-btn primary" id="btnLogin">Sign in</button>
                <a class="pw-btn" href="/buyer/onboarding.html">Onboarding notes</a>
              </div>

              <div id="loginStatus" class="pw-status" role="status"></div>
              <details class="pw-details pw-dev">
                <summary>Developer response</summary>
                <div class="pw-details-body">
                  <pre class="pw-codeblock" id="loginOut">{}</pre>
                </div>
              </details>
            </div>

            <div class="pw-card">
              <div class="pw-card-title">
                <h2>Register platform</h2>
                <span class="pw-kicker">Creates org + initial API key</span>
              </div>
              <p class="pw-muted">Use this for real third-party onboarding. You'll get an API key + buyer token you can copy.</p>

              <div class="pw-row">
                <div class="pw-field">
                  <label>Org name</label>
                  <input class="pw-input" id="regOrgName" value="My Platform" />
                </div>
                <div class="pw-field">
                  <label>API key name</label>
                  <input class="pw-input" id="regApiKeyName" value="default" />
                </div>
              </div>

              <div class="pw-row">
                <div class="pw-field">
                  <label>Email</label>
                  <input class="pw-input" id="regEmail" placeholder="you@company.com" />
                </div>
                <div class="pw-field">
                  <label>Password</label>
                  <input class="pw-input" id="regPassword" type="password" placeholder="min 8 chars" />
                </div>
              </div>

              <div class="pw-actions">
                <button class="pw-btn primary" id="btnRegister">Create org</button>
              </div>

              <div id="regStatus" class="pw-status" role="status"></div>
              <details class="pw-details pw-dev">
                <summary>Developer response</summary>
                <div class="pw-details-body">
                  <pre class="pw-codeblock" id="regOut">{}</pre>
                </div>
              </details>
            </div>

            <div class="pw-card">
              <div class="pw-card-title">
                <h2>API keys</h2>
                <span class="pw-kicker">Create, revoke, and copy</span>
              </div>

              <div class="pw-row">
                <div class="pw-field">
                  <label>API key name</label>
                  <input class="pw-input" id="keyName" value="default" />
                </div>
                <div class="pw-field">
                  <label>&nbsp;</label>
                  <button class="pw-btn primary" id="btnCreateKey">Create API key</button>
                </div>
              </div>

              <div class="pw-field">
                <label>Buyer token</label>
                <input class="pw-input" id="buyerToken" placeholder="pw_bu_..." />
              </div>

              <div class="pw-actions">
                <button class="pw-btn" id="btnSaveToken">Save token</button>
                <button class="pw-btn" id="btnListKeys">List keys</button>
              </div>

              <div class="pw-row">
                <div class="pw-field">
                  <label>Revoke API key (id)</label>
                  <input class="pw-input" id="revokeKeyId" placeholder="apiKeyId" />
                </div>
                <div class="pw-field">
                  <label>&nbsp;</label>
                  <button class="pw-btn danger" id="btnRevokeKey">Revoke</button>
                </div>
              </div>

              <div id="keyStatus" class="pw-status" role="status"></div>
              <details class="pw-details pw-dev">
                <summary>Developer response</summary>
                <div class="pw-details-body">
                  <pre class="pw-codeblock" id="keyOut">{}</pre>
                </div>
              </details>
            </div>

            <div class="pw-card">
              <div class="pw-card-title">
                <h2>Domains &amp; origins</h2>
                <span class="pw-kicker">Verify once</span>
              </div>
              <p class="pw-muted">
                Origins must be verified before you can publish bounties. Methods: <span class="pw-mono">dns_txt</span>, <span class="pw-mono">http_file</span>,
                <span class="pw-mono">header</span>.
              </p>

              <div class="pw-row">
                <div class="pw-field">
                  <label>Origin URL</label>
                  <input class="pw-input" id="originUrl" value="https://example.com" />
                </div>
                <div class="pw-field">
                  <label>Method</label>
                  <input class="pw-input" id="originMethod" value="dns_txt" />
                </div>
              </div>

              <div class="pw-actions">
                <button class="pw-btn primary" id="btnAddOrigin">Add origin</button>
                <button class="pw-btn" id="btnListOrigins">Refresh list</button>
              </div>

              <div class="pw-row">
                <div class="pw-field">
                  <label>Origin ID</label>
                  <input class="pw-input" id="originId" placeholder="originId" />
                </div>
                <div class="pw-field">
                  <label>&nbsp;</label>
                  <div class="pw-actions">
                    <button class="pw-btn" id="btnCheckOrigin">Check verification</button>
                    <button class="pw-btn danger" id="btnRevokeOrigin">Revoke</button>
                  </div>
                </div>
              </div>

              <div id="originStatus" class="pw-status" role="status"></div>
              <details class="pw-details pw-dev">
                <summary>Developer response</summary>
                <div class="pw-details-body">
                  <pre class="pw-codeblock" id="originOut">{}</pre>
                </div>
              </details>
            </div>

            <div class="pw-card">
              <div class="pw-card-title">
                <h2>Browser CORS allowlist</h2>
                <span class="pw-kicker">Per org</span>
              </div>
              <p class="pw-muted">If your platform UI runs in the browser, add its origin here. One origin per line.</p>

              <div class="pw-field">
                <label>Allowed origins</label>
                <textarea class="pw-textarea" id="corsOrigins" placeholder="https://app.yourdomain.com"></textarea>
              </div>

              <div class="pw-actions">
                <button class="pw-btn" id="btnGetCors">Load</button>
                <button class="pw-btn primary" id="btnSetCors">Save</button>
              </div>

              <div id="corsStatus" class="pw-status" role="status"></div>
              <details class="pw-details pw-dev">
                <summary>Developer response</summary>
                <div class="pw-details-body">
                  <pre class="pw-codeblock" id="corsOut">{}</pre>
                </div>
              </details>
            </div>
          </section>

          <section id="apps" class="pw-stack">
            <div class="pw-card">
              <div class="pw-card-title">
                <h2>Apps registry</h2>
                <span class="pw-kicker">Instant publish (no approval)</span>
              </div>
              <p class="pw-muted">
                Apps map to <span class="pw-mono">task_descriptor.type</span>. Once created, your app shows up in <a href="/apps/">the marketplace</a> immediately.
              </p>

              <div class="pw-row">
                <div class="pw-field">
                  <label>Slug</label>
                  <input class="pw-input" id="appSlug" placeholder="my-app" />
                </div>
                <div class="pw-field">
                  <label>Task type</label>
                  <input class="pw-input" id="appTaskType" placeholder="my_task_type" />
                </div>
              </div>

              <div class="pw-row">
                <div class="pw-field">
                  <label>Name</label>
                  <input class="pw-input" id="appName" placeholder="My App" />
                </div>
                <div class="pw-field">
                  <label>Dashboard URL (optional)</label>
                  <input class="pw-input" id="appDashboardUrl" placeholder="https://your.app/dashboard or /apps/app/my-app/" />
                </div>
              </div>

              <details class="pw-details">
                <summary>Default descriptor (advanced)</summary>
                <div class="pw-details-body">
                  <textarea class="pw-textarea" id="appDefaultDescriptor" placeholder="{\"schema_version\":\"v1\", ... }"></textarea>
                </div>
              </details>

              <div class="pw-actions">
                <button class="pw-btn" id="btnListOrgApps">Refresh</button>
                <button class="pw-btn primary" id="btnCreateOrgApp">Create app</button>
                <a class="pw-btn" href="/apps/">Open marketplace</a>
              </div>

              <div id="appsStatus" class="pw-status" role="status"></div>
              <details class="pw-details pw-dev">
                <summary>Developer response</summary>
                <div class="pw-details-body">
                  <pre class="pw-codeblock" id="appsOut">{}</pre>
                </div>
              </details>
            </div>
          </section>

          <section id="work" class="pw-stack">
            <div class="pw-card">
              <div class="pw-card-title">
                <h2>Publish work</h2>
                <span class="pw-kicker">Fast path: use an app page</span>
              </div>
              <p class="pw-muted">
                Recommended: pick an app in the marketplace and publish using its friendly form. You can also publish from this console (advanced).
              </p>
              <div class="pw-actions">
                <a class="pw-btn primary" href="/apps/">Publish via app</a>
                <a class="pw-btn" href="#workAdvanced">Advanced bounty form</a>
              </div>
            </div>

            <details class="pw-details" id="workAdvanced" open>
              <summary>Advanced: bounty form</summary>
              <div class="pw-details-body">
                <div class="pw-card soft">
                  <div class="pw-card-title">
                    <h3>Bounties</h3>
                    <span class="pw-kicker">Create + publish</span>
                  </div>

                  <div class="pw-field">
                    <label>Title</label>
                    <input class="pw-input" id="bTitle" value="Portal bounty" />
                  </div>
                  <div class="pw-field">
                    <label>Description</label>
                    <textarea class="pw-textarea" id="bDesc">Created from buyer portal</textarea>
                  </div>
                  <div class="pw-field">
                    <label>Allowed origins (comma separated)</label>
                    <input class="pw-input" id="bOrigins" value="https://example.com" />
                  </div>

                  <div class="pw-row">
                    <div class="pw-field">
                      <label>Payout cents</label>
                      <input class="pw-input" id="bPayout" value="1200" />
                    </div>
                    <div class="pw-field">
                      <label>Fingerprint classes (comma separated)</label>
                      <input class="pw-input" id="bFps" value="desktop_us" />
                    </div>
                  </div>

                  <div class="pw-actions">
                    <button class="pw-btn primary" id="btnCreateBounty">Create bounty</button>
                    <button class="pw-btn" id="btnListBounties">List bounties</button>
                  </div>

                  <div class="pw-field">
                    <label>Bounty ID</label>
                    <input class="pw-input" id="bountyId" placeholder="bountyId" />
                  </div>
                  <div class="pw-actions">
                    <button class="pw-btn" id="btnPublish">Publish bounty</button>
                  </div>

                  <div id="bountyStatus" class="pw-status" role="status"></div>
                  <details class="pw-details pw-dev">
                    <summary>Developer response</summary>
                    <div class="pw-details-body">
                      <pre class="pw-codeblock" id="bountyOut">{}</pre>
                    </div>
                  </details>
                </div>
              </div>
            </details>
          </section>

          <section id="money" class="pw-stack">
            <div class="pw-card">
              <div class="pw-card-title">
                <h2>Earnings</h2>
                <span class="pw-kicker">Platform cut + Proofwork fee + worker net</span>
              </div>
              <p class="pw-muted">Use filters to drill down.</p>

              <div class="pw-row">
                <div class="pw-field">
                  <label>Payout status</label>
                  <input class="pw-input" id="payoutStatusFilter" placeholder="pending|paid|failed|refunded" />
                </div>
                <div class="pw-field">
                  <label>Task type</label>
                  <input class="pw-input" id="payoutTaskTypeFilter" placeholder="github_scan" />
                </div>
              </div>

              <div class="pw-actions">
                <button class="pw-btn primary" id="btnGetEarnings">Refresh totals</button>
                <button class="pw-btn" id="btnListPayouts">List payouts</button>
              </div>

              <div id="earningsStatus" class="pw-status" role="status"></div>
              <details class="pw-details pw-dev" open>
                <summary>Developer response</summary>
                <div class="pw-details-body">
                  <pre class="pw-codeblock" id="earningsOut">{}</pre>
                </div>
              </details>
            </div>
          </section>

          <section id="disputes" class="pw-stack">
            <div class="pw-card">
              <div class="pw-card-title">
                <h2>Disputes</h2>
                <span class="pw-kicker">Default hold window: 1 day</span>
              </div>
              <p class="pw-muted">
                Open disputes during the hold window. If unresolved, auto-refund executes after hold: <span class="pw-mono">refund = gross - Proofwork fee</span>.
              </p>

              <div class="pw-row">
                <div class="pw-field">
                  <label>Payout ID</label>
                  <input class="pw-input" id="disputePayoutId" placeholder="payoutId" />
                </div>
                <div class="pw-field">
                  <label>Submission ID (optional)</label>
                  <input class="pw-input" id="disputeSubmissionId" placeholder="submissionId" />
                </div>
              </div>
              <div class="pw-field">
                <label>Reason</label>
                <textarea class="pw-textarea" id="disputeReason">Incorrect result</textarea>
              </div>

              <div class="pw-actions">
                <button class="pw-btn primary" id="btnCreateDispute">Open dispute</button>
                <button class="pw-btn" id="btnListDisputes">List disputes</button>
              </div>

              <div class="pw-row">
                <div class="pw-field">
                  <label>Cancel dispute (id)</label>
                  <input class="pw-input" id="cancelDisputeId" placeholder="disputeId" />
                </div>
                <div class="pw-field">
                  <label>&nbsp;</label>
                  <button class="pw-btn danger" id="btnCancelDispute">Cancel dispute</button>
                </div>
              </div>

              <div id="disputeStatus" class="pw-status" role="status"></div>
              <details class="pw-details pw-dev" open>
                <summary>Developer response</summary>
                <div class="pw-details-body">
                  <pre class="pw-codeblock" id="disputeOut">{}</pre>
                </div>
              </details>
            </div>
          </section>

          <section id="settings" class="pw-stack">
            <div class="pw-card">
              <div class="pw-card-title">
                <h2>Platform fee (your cut)</h2>
                <span class="pw-kicker">Set once</span>
              </div>
              <p class="pw-muted">Your platform cut is applied first. Proofwork takes an additional fixed fee from the worker portion.</p>

              <div class="pw-row">
                <div class="pw-field">
                  <label>Platform fee bps</label>
                  <input class="pw-input" id="pfBps" value="0" />
                </div>
                <div class="pw-field">
                  <label>Wallet (Base / EVM address)</label>
                  <input class="pw-input" id="pfWallet" placeholder="0x..." />
                </div>
              </div>

              <div class="pw-actions">
                <button class="pw-btn" id="btnGetPlatformFee">Load</button>
                <button class="pw-btn primary" id="btnSetPlatformFee">Save</button>
              </div>

              <div id="pfStatus" class="pw-status" role="status"></div>
              <details class="pw-details pw-dev">
                <summary>Developer response</summary>
                <div class="pw-details-body">
                  <pre class="pw-codeblock" id="pfOut">{}</pre>
                </div>
              </details>
            </div>

            <div class="pw-card">
              <div class="pw-card-title">
                <h2>Quotas (safety caps)</h2>
                <span class="pw-kicker">Optional</span>
              </div>
              <p class="pw-muted">Optional caps to prevent runaway costs, bad verifiers, or spammy workers.</p>

              <div class="pw-row">
                <div class="pw-field">
                  <label>Daily spend limit (cents)</label>
                  <input class="pw-input" id="quotaDailySpend" placeholder="e.g. 100000 (=$1000)" />
                </div>
                <div class="pw-field">
                  <label>Monthly spend limit (cents)</label>
                  <input class="pw-input" id="quotaMonthlySpend" placeholder="e.g. 1000000 (=$10k)" />
                </div>
              </div>
              <div class="pw-row">
                <div class="pw-field">
                  <label>Max open jobs</label>
                  <input class="pw-input" id="quotaMaxOpenJobs" placeholder="e.g. 100" />
                </div>
                <div class="pw-field">
                  <label>&nbsp;</label>
                  <span class="pw-muted">Limits apply at publish/create time.</span>
                </div>
              </div>

              <div class="pw-actions">
                <button class="pw-btn" id="btnGetQuotas">Load</button>
                <button class="pw-btn primary" id="btnSetQuotas">Save</button>
              </div>
              <div id="quotaStatus" class="pw-status" role="status"></div>
              <details class="pw-details pw-dev">
                <summary>Developer response</summary>
                <div class="pw-details-body">
                  <pre class="pw-codeblock" id="quotaOut">{}</pre>
                </div>
              </details>
            </div>
          </section>
        </section>
      </div>
    </main>

    <script src="./app.js"></script>
    <script type="module" src="/ui/shell.js"></script>
  </body>
</html>

