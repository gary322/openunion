<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title></title>
    <link rel="stylesheet" href="/ui/ui.css" />
  </head>
  <body class="theme-apps" data-portal="apps">
    <header class="pw-topbar">
      <div class="pw-topbar-inner">
        <a class="pw-brand" href="/apps/" aria-label="Proofwork home">
          <span class="pw-brand-badge pw-mono">PW</span>
          Proofwork
        </a>
        <nav class="pw-topnav" aria-label="Primary">
          <a class="pw-navlink" href="/apps/" aria-current="page">Catalog</a>
          <a class="pw-navlink" href="/buyer/">Platforms</a>
          <a class="pw-navlink" href="/worker/">Workers</a>
          <a class="pw-navlink" href="/admin/">Admin</a>
          <a class="pw-navlink" href="/docs/" target="_blank" rel="noreferrer">Docs</a>
        </nav>
      </div>
    </header>

    <main class="pw-container">
      <section class="pw-hero">
        <h1 id="hdrTitle"></h1>
        <p id="hdrDesc"></p>
        <div class="pw-hero-actions">
          <div class="pw-badge">
            New platform? Follow <a href="/buyer/onboarding.html">onboarding</a>. Already onboarded? Paste your buyer token and publish.
          </div>
          <div class="pw-actions">
            <a class="pw-btn" href="/apps/">All apps</a>
            <a class="pw-btn primary" href="/buyer/">Platform console</a>
          </div>
        </div>
      </section>

      <div class="pw-console">
        <aside class="pw-sidebar" aria-label="App navigation">
          <nav class="pw-sidenav">
            <a href="#create" aria-current="page">Create work</a>
            <a href="#monitor">Monitor</a>
            <div class="pw-sidenav-group">
              <div class="pw-sidenav-title">Advanced</div>
              <a href="#advanced" class="pw-dev">Descriptor JSON</a>
            </div>
          </nav>
        </aside>

        <section class="pw-stack" aria-label="App content">
          <section class="pw-card" id="create">
            <div class="pw-card-title">
              <h2>Create work</h2>
              <span class="pw-kicker" id="appBadges"></span>
            </div>

            <div class="pw-stepper">
              <div class="pw-step">
                <div class="pw-step-num">1</div>
                <div>
                  <div class="pw-step-title">Connect</div>
                  <div class="pw-step-desc">Paste your buyer token once. We store it locally in your browser.</div>
                </div>
              </div>
              <div class="pw-step">
                <div class="pw-step-num">2</div>
                <div>
                  <div class="pw-step-title">Describe</div>
                  <div class="pw-step-desc">Fill a simple form; we generate the descriptor automatically.</div>
                </div>
              </div>
              <div class="pw-step">
                <div class="pw-step-num">3</div>
                <div>
                  <div class="pw-step-title">Publish</div>
                  <div class="pw-step-desc">Choose origin + payout, then Create + publish.</div>
                </div>
              </div>
            </div>

            <div class="pw-row" id="connectedRow" hidden>
              <div class="pw-field">
                <div class="pw-badge">
                  Connected: <span class="pw-mono" id="connectedTokenPrefix">pw_bu_…</span>
                  <span class="pw-muted">• token saved locally</span>
                </div>
              </div>
              <div class="pw-field">
                <label>&nbsp;</label>
                <div class="pw-actions">
                  <button class="pw-btn" id="btnChangeToken" type="button">Change token</button>
                </div>
              </div>
            </div>

            <div class="pw-row" id="connectRow">
              <div class="pw-field">
                <label>Buyer token</label>
                <input class="pw-input" id="buyerToken" placeholder="pw_bu_…" />
              </div>
              <div class="pw-field">
                <label>&nbsp;</label>
                <button class="pw-btn primary" id="btnSaveToken" type="button">Connect</button>
              </div>
            </div>

            <div class="pw-row">
              <div class="pw-field">
                <label>Template</label>
                <select class="pw-select" id="template"></select>
              </div>
              <div class="pw-field">
                <label>&nbsp;</label>
                <button class="pw-btn" id="btnApplyTemplate" type="button">Apply</button>
              </div>
            </div>

            <div id="form"></div>

            <div class="pw-grid">
              <div class="pw-card soft">
                <div class="pw-kicker">Allowed origin</div>
                <div class="pw-muted">Pick from verified origins for your org.</div>
                <div class="pw-field">
                  <label class="pw-offscreen" for="originSelect">Origin</label>
                  <select class="pw-select" id="originSelect"></select>
                </div>
                <div class="pw-actions">
                  <button class="pw-btn" id="btnRefreshOrigins" type="button">Refresh origins</button>
                  <a class="pw-btn" href="/buyer/" rel="noreferrer">Verify origins</a>
                </div>
              </div>

              <div class="pw-card soft">
                <div class="pw-kicker">Payout</div>
                <div class="pw-muted">Worker net is after platform cut + Proofwork 1% fee.</div>
                <div class="pw-row">
                  <div class="pw-field">
                    <label>Payout (cents)</label>
                    <input class="pw-input" id="payoutCents" type="number" value="1000" />
                  </div>
                  <div class="pw-field">
                    <label>Proofs</label>
                    <input class="pw-input" id="requiredProofs" type="number" value="2" />
                  </div>
                </div>
              </div>
            </div>

            <div class="pw-row">
              <div class="pw-field">
                <label>Title</label>
                <input class="pw-input" id="title" placeholder="Auto-filled" />
              </div>
              <div class="pw-field">
                <label>&nbsp;</label>
                <div class="pw-actions">
                  <button class="pw-btn" id="btnCreateDraft" type="button">Create draft</button>
                  <button class="pw-btn primary" id="btnCreatePublish" type="button">Create + publish</button>
                </div>
              </div>
            </div>

            <div id="createStatus" class="pw-status" role="status"></div>

            <details class="pw-details pw-dev" id="advanced">
              <summary>Advanced: descriptor preview</summary>
              <div class="pw-details-body">
                <div class="pw-row">
                  <div class="pw-field">
                    <label>Descriptor JSON</label>
                    <pre class="pw-codeblock" id="descriptorOut">{}</pre>
                  </div>
                  <div class="pw-field">
                    <label>API payload (POST /api/bounties)</label>
                    <pre class="pw-codeblock" id="payloadOut">{}</pre>
                  </div>
                </div>
              </div>
            </details>
          </section>

          <section class="pw-card" id="monitor">
            <div class="pw-card-title">
              <h2>Monitor</h2>
              <span class="pw-kicker">Your bounties + jobs for this app</span>
            </div>

            <div class="pw-actions">
              <button class="pw-btn" id="btnRefreshBounties" type="button">Refresh</button>
              <button class="pw-btn" id="btnAutoRefresh" type="button" aria-pressed="true">Auto-refresh</button>
            </div>

            <div id="monitorStatus" class="pw-status" role="status"></div>

            <div class="pw-row">
              <div class="pw-field">
                <label>Bounties</label>
                <div class="pw-scroll">
                  <table class="pw-table">
                    <thead>
                      <tr>
                        <th>Title</th>
                        <th>Status</th>
                        <th>Payout</th>
                        <th>Created</th>
                        <th></th>
                      </tr>
                    </thead>
                    <tbody id="bountiesTbody"></tbody>
                  </table>
                </div>
              </div>
            </div>

            <div class="pw-row">
              <div class="pw-field">
                <label>Jobs (selected bounty)</label>
                <div class="pw-scroll">
                  <table class="pw-table">
                    <thead>
                      <tr>
                        <th>Job</th>
                        <th>Status</th>
                        <th>Verdict</th>
                        <th>Quality</th>
                        <th></th>
                      </tr>
                    </thead>
                    <tbody id="jobsTbody"></tbody>
                  </table>
                </div>
              </div>
            </div>
          </section>
        </section>
      </div>
    </main>

    <script id="appConfig" type="application/json">{}</script>
    <script type="module" src="/apps/app_page_bootstrap.js"></script>
    <script type="module" src="/ui/shell.js"></script>
  </body>
</html>
