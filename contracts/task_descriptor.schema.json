{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://example.com/schemas/task_descriptor.json",
  "type": "object",
  "additionalProperties": true,
  "required": ["schema_version", "type", "capability_tags"],
  "properties": {
    "schema_version": {"const": "v1"},
    "type": {"type": "string", "minLength": 1, "maxLength": 120},
    "capability_tags": {
      "type": "array",
      "minItems": 1,
      "maxItems": 20,
      "items": {"enum": ["browser", "http", "ffmpeg", "llm_summarize", "screenshot"]}
    },
    "input_spec": {"type": "object"},
    "output_spec": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "required_artifacts": {
          "type": "array",
          "maxItems": 50,
          "items": {
            "type": "object",
            "additionalProperties": true,
            "required": ["kind"],
            "properties": {
              "kind": {"enum": ["screenshot", "snapshot", "pdf", "log", "video", "other"]},
              "count": {"type": "integer", "minimum": 1, "maximum": 20},
              "label_prefix": {"type": "string", "minLength": 1, "maxLength": 200},
              "label": {"type": "string", "minLength": 1, "maxLength": 200}
            }
          }
        }
      }
    },
    "freshness_sla_sec": {"type": "integer", "minimum": 1, "maximum": 86400},
    "site_profile": {"type": "object"}
  }
}
