# Database
DATABASE_URL=postgresql://postgres:postgres@localhost:5433/proofwork

# Storage
STORAGE_BACKEND=local
STORAGE_LOCAL_DIR=./var/uploads
PUBLIC_BASE_URL=http://localhost:3000
MAX_UPLOAD_BYTES=15728640
PRESIGN_TTL_SEC=900
ARTIFACT_TTL_DAYS=7

# S3-compatible (when STORAGE_BACKEND=s3)
STORAGE_ENDPOINT=http://localhost:19100
S3_BUCKET=proofwork
S3_BUCKET_STAGING=proofwork-staging
S3_BUCKET_CLEAN=proofwork-clean
S3_BUCKET_QUARANTINE=proofwork-quarantine
S3_ACCESS_KEY_ID=minioadmin
S3_SECRET_ACCESS_KEY=minioadmin
S3_REGION=us-east-1

# Auth tokens (defaults shown; override in prod)
VERIFIER_TOKEN=pw_vf_internal
ADMIN_TOKEN=pw_adm_internal
WORKER_TOKEN_PEPPER=dev_pepper_change_me
BUYER_TOKEN_PEPPER=dev_pepper_change_me
SESSION_SECRET=dev_session_secret_change_me

# CORS (comma-separated origins, e.g. https://buyer.example.com,https://admin.example.com)
CORS_ALLOW_ORIGINS=

# Backpressure
MAX_VERIFIER_BACKLOG=500
MAX_VERIFIER_BACKLOG_AGE_SEC=0
MAX_VERIFICATION_ATTEMPTS=3
MAX_OUTBOX_PENDING_AGE_SEC=0
MAX_ARTIFACT_SCAN_BACKLOG_AGE_SEC=0
UNIVERSAL_WORKER_PAUSE=false
ENABLE_TASK_DESCRIPTOR=true
# Demo seeding (dev only). In production, this should be false unless you explicitly want a demo env.
ENABLE_DEMO_SEED=false
TASK_DESCRIPTOR_MAX_BYTES=16000
TASK_DESCRIPTOR_MAX_DEPTH=6
BLOCKED_UPLOAD_CONTENT_TYPES=
MIN_PAYOUT_CENTS=0

# Malware scanning
# - basic: format sniffing only
# - clamd: talk to a clamd sidecar over TCP
# - clamav: run local `clamscan` binary (not recommended in containers)
SCANNER_ENGINE=basic
CLAMD_HOST=localhost
CLAMD_PORT=3310
CLAMD_TIMEOUT_MS=15000

# Workers
API_BASE_URL=http://localhost:3000
PAYMENTS_PROVIDER=mock
PAYMENTS_PROVIDER_URL=
PAYMENTS_PROVIDER_AUTH_HEADER=
UNIVERSAL_WORKER_CANARY_PERCENT=100
# Optional (arXiv jobs): use llm-arxiv to generate real references in worker outputs
LLM_ARXIV_ENABLED=false
LLM_ARXIV_MAX_RESULTS=5
LLM_BIN=llm

# Worker health servers
WORKER_HEALTH_HOST=0.0.0.0
OUTBOX_HEALTH_PORT=9101
VERIFICATION_HEALTH_PORT=9102
PAYOUT_HEALTH_PORT=9103
SCANNER_HEALTH_PORT=9104
RETENTION_HEALTH_PORT=9105

# Stripe (buyer funding)
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=

# Crypto payouts (Base USDC via AWS KMS)
BASE_RPC_URL=
EVM_CHAIN_ID=8453
BASE_USDC_ADDRESS=0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913
BASE_PAYOUT_SPLITTER_ADDRESS=
BASE_CONFIRMATIONS_REQUIRED=5
KMS_PAYOUT_KEY_ID=
# For local-chain payout tests (PAYMENTS_PROVIDER=crypto_evm_local)
LOCAL_EVM_PRIVATE_KEY=
LOCAL_EVM_RPC_URL=http://127.0.0.1:8545
PROOFWORK_FEE_BPS=100
MAX_PROOFWORK_FEE_BPS=10000
PROOFWORK_FEE_WALLET_BASE=
# Deprecated aliases (kept for backward-compat):
# PLATFORM_FEE_BPS=100
# MAX_PLATFORM_FEE_BPS=10000
# PLATFORM_FEE_WALLET_BASE=
BASE_GAS_LIMIT=250000
BASE_MAX_FEE_PER_GAS_WEI=
BASE_MAX_PRIORITY_FEE_PER_GAS_WEI=

# Convenience env vars for contract/admin scripts (NOT used by the API):
# - Deploy contract:
#   RPC_URL=https://mainnet.base.org DEPLOYER_PRIVATE_KEY=0x... npx tsx contracts/scripts/deploy-splitter.ts
# - Approve splitter to spend USDC:
#   BASE_PAYOUT_SPLITTER_ADDRESS=0x... PAYER_PRIVATE_KEY=0x... npx tsx scripts/crypto/approve_base_usdc.ts
DEPLOYER_PRIVATE_KEY=
PAYER_PRIVATE_KEY=

# Verifier gateway (required for verification worker)
VERIFIER_GATEWAY_URL=http://localhost:4010/run
VERIFIER_GATEWAY_AUTH_HEADER=
VERIFIER_GATEWAY_PORT=4010
VERIFIER_GATEWAY_HOST=0.0.0.0
VERIFIER_MAX_ARTIFACT_BYTES=25000000
VERIFIER_ARTIFACT_DOWNLOAD_TIMEOUT_MS=15000
VERIFIER_PLAYWRIGHT_TIMEOUT_MS=15000

# Outbox worker tuning
MAX_OUTBOX_ATTEMPTS=10
OUTBOX_LOCK_TIMEOUT_SEC=600
